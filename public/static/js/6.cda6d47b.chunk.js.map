{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","shared/components/UIElements/ErrorModal.js","shared/components/UIElements/Modal.js","shared/hooks/http-hook.js","shared/components/UIElements/Card.js","shared/components/UIElements/Map.js","places/components/PlaceItem.js","places/components/PlaceList.js","places/pages/UserPlaces.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","ErrorModal","props","onCancel","onClear","header","show","footer","onClick","ModalOverlay","content","className","style","headerClass","onSubmit","event","preventDefault","contentClass","children","footerClass","createPortal","document","getElementById","Modal","Fragment","in","mountOnEnter","unmountOnExit","timeout","classNames","useHttpClient","useState","isLoading","setIsLoading","setError","activeHttpRequests","useRef","sendRequest","useCallback","url","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","response","json","responseData","filter","reqCtrl","ok","Error","message","useEffect","forEach","abortCtrl","abort","clearError","Card","Map","mapRef","center","zoom","map","window","google","maps","Marker","position","ref","PlaceItem","auth","useContext","AuthContext","showMap","setShowMap","showConfirmModal","setShowConfirmModal","closeMapHandler","cancelDeteleHandler","confirmDeleteHandler","process","id","Authorization","token","onDelete","address","Button","coordinates","inverse","danger","classNam","LoadingSpinner","asOverlay","src","image","alt","title","description","userId","creatorId","to","isLoggedIn","PlaceList","items","length","place","creator","location","onDeletePlace","UserPlaces","loadedPlaces","setLoadedPlaces","useParams","places","fetchPlaces","deletedPlaceId","prevPlaces"],"mappings":"qGAAA,SAASA,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,OA/BZ,mC,gCCAA,oCAkBeC,IAbI,SAAAC,GACjB,OACE,kBAAC,IAAD,CACEC,SAAUD,EAAME,QAChBC,OAAO,qBACPC,OAAQJ,EAAMd,MACdmB,OAAQ,kBAAC,IAAD,CAAQC,QAASN,EAAME,SAAvB,SAER,2BAAIF,EAAMd,U,gCCbhB,2CAOMqB,GAPN,MAOqB,SAACP,GACpB,IAAMQ,EACJ,yBAAKC,UAAS,gBAAWT,EAAMS,WAAaC,MAAOV,EAAMU,OACvD,4BAAQD,UAAS,wBAAmBT,EAAMW,cACxC,4BAAKX,EAAMG,SAEb,0BACES,SACEZ,EAAMY,SAAWZ,EAAMY,SAAW,SAACC,GAAD,OAAWA,EAAMC,mBAGrD,yBAAKL,UAAS,yBAAoBT,EAAMe,eACrCf,EAAMgB,UAET,4BAAQP,UAAS,wBAAmBT,EAAMiB,cACvCjB,EAAMK,UAMf,OAAOa,uBAAaV,EAASW,SAASC,eAAe,iBAoBxCC,IAjBD,SAACrB,GACb,OACE,kBAAC,IAAMsB,SAAP,KACGtB,EAAMI,MAAQ,kBAAC,IAAD,CAAUE,QAASN,EAAMC,WACxC,kBAAC,IAAD,CACEsB,GAAIvB,EAAMI,KACVoB,cAAY,EACZC,eAAa,EACbC,QAAS,IACTC,WAAW,SAEX,kBAACpB,EAAiBP,O,q4MCxCnB,IAAM4B,EAAgB,WACzB,MAAoCC,oBAAU,GAA9C,mBAAQC,EAAR,KAAmBC,EAAnB,KACA,EAA4BF,qBAA5B,mBAAQ3C,EAAR,KAAe8C,EAAf,KAEMC,EAAqBC,iBAAQ,IAE7BC,EAAcC,sBAAW,uCAC3B,WAAQC,GAAR,oGAAaC,EAAb,+BAAsB,MAAOC,EAA7B,+BAAoC,KAAMC,EAA1C,+BAAoD,GAChDT,GAAc,GACRU,EAAgB,IAAIC,gBAC1BT,EAAmBU,QAAQC,KAAMH,GAHrC,kBAM+BI,MAAOR,EAAK,CAC/BC,SACAC,OACAC,UACAM,OAAQL,EAAcK,SAVlC,cAMcC,EANd,iBAamCA,EAASC,OAb5C,WAacC,EAbd,OAeQhB,EAAmBU,QAAUV,EAAmBU,QAAQO,QACpD,SAAAC,GAAO,OAAIA,IAAYV,KAGrBM,EAASK,GAnBvB,uBAoBkB,IAAIC,MAAOJ,EAAaK,SApB1C,eAuBQvB,GAAc,GAvBtB,kBAwBekB,GAxBf,wCA0BQjB,EAAU,KAAIsB,SACdvB,GAAc,GA3BtB,+DAD2B,sDAgC3B,IAcJ,OAPAwB,qBAAW,WACP,OAAO,WAEHtB,EAAmBU,QAAQa,SAAS,SAAAC,GAAS,OAAIA,EAAUC,cAEhE,IAEI,CAAE5B,YAAW5C,QAAOiD,cAAawB,WAXrB,WACf3B,EAAU,U,gCC5ClB,0BAYe4B,IARF,SAAA5D,GACX,OACE,yBAAKS,UAAS,eAAUT,EAAMS,WAAaC,MAAOV,EAAMU,OACrDV,EAAMgB,Y,kNCoBE6C,G,MAvBH,SAAC7D,GACX,IAAM8D,EAAS5B,mBAEP6B,EAAiB/D,EAAjB+D,OAAQC,EAAShE,EAATgE,KAWhB,OATAT,qBAAU,WACR,IAAMU,EAAM,IAAIC,OAAOC,OAAOC,KAAKP,IAAIC,EAAOnB,QAAS,CACrDoB,OAAQA,EACRC,KAAMA,IAGR,IAAIE,OAAOC,OAAOC,KAAKC,OAAO,CAAEC,SAAUtE,EAAM+D,OAAQE,IAAKA,MAC5D,CAACF,EAAQC,IAGV,yBACEO,IAAKT,EACLrD,UAAS,cAAST,EAAMS,WACxBC,MAAOV,EAAMU,U,+0MCTnB,IA6Ee8D,EA7EG,SAAExE,GAClB,MAAsD4B,cAA9CE,EAAR,EAAQA,UAAW5C,EAAnB,EAAmBA,MAAOiD,EAA1B,EAA0BA,YAAawB,EAAvC,EAAuCA,WACjCc,EAAOC,qBAAYC,KACzB,EAAgC9C,oBAAU,GAA1C,mBAAQ+C,EAAR,KAAiBC,EAAjB,KACA,EAAkDhD,oBAAU,GAA5D,mBAAQiD,EAAR,KAA0BC,EAA1B,KAGMC,EAAkB,kBAAMH,GAAY,IAMpCI,EAAsB,WAC1BF,GAAqB,IAGjBG,EAAoB,uCAAG,qFAC3BH,GAAqB,GADM,kBAGnB5C,EAAY,GAAD,OAAKgD,yCAAL,mBAAiDnF,EAAMoF,IAAM,SAAU,KAAM,CAAEC,cAAe,UAAYZ,EAAKa,QAHvG,OAIzBtF,EAAMuF,SAAUvF,EAAMoF,IAJG,uGAAH,qDAS1B,OACE,kBAAC,IAAM9D,SAAP,KACE,kBAACvB,EAAA,EAAD,CAAYb,MAAQA,EAAQgB,QAAUyD,IACtC,kBAACtC,EAAA,EAAD,CACEjB,KAAOwE,EACP3E,SAAW+E,EACX7E,OAASH,EAAMwF,QACfzE,aAAa,4BACbE,YAAY,4BACZZ,OAAS,kBAACoF,EAAA,EAAD,CAAQnF,QAAU0E,GAAlB,UAET,yBAAKvE,UAAU,iBACb,kBAAC,EAAD,CAAKsD,OAAS/D,EAAM0F,YAAc1B,KAAO,OAG7C,kBAAC3C,EAAA,EAAD,CACEjB,KAAO0E,EACP7E,SAAWgF,EACX9E,OAAO,gBAAgBc,YAAY,4BACnCZ,OAAS,kBAAC,IAAMiB,SAAP,KAAgB,kBAACmE,EAAA,EAAD,CAAQE,SAAO,EAACrF,QAAU2E,GAA1B,UACvB,kBAACQ,EAAA,EAAD,CAAQG,QAAM,EAACtF,QAAU4E,GAAzB,YACF,+GAEF,wBAAIzE,UAAU,cACZ,kBAACmD,EAAA,EAAD,CAAMiC,SAAS,uBACX/D,GAAa,kBAACgE,EAAA,EAAD,CAAgBC,WAAS,IACxC,yBAAKtF,UAAU,qBACb,yBAAKuF,IAAG,UAAMb,uCAAN,OAAwCnF,EAAMiG,MAA9C,KAAyDC,IAAMlG,EAAMmG,SAE/E,yBAAK1F,UAAU,oBACb,4BAAMT,EAAMmG,OACZ,4BAAMnG,EAAMwF,SACZ,2BAAKxF,EAAMoG,cAEb,yBAAK3F,UAAU,uBACb,kBAACgF,EAAA,EAAD,CAAQE,SAAO,EAACrF,QAvDH,kBAAMuE,GAAY,KAuD/B,eAGEJ,EAAK4B,SAAWrG,EAAMsG,WACtB,kBAACb,EAAA,EAAD,CAAQc,GAAE,kBAAcvG,EAAMoF,KAA9B,QACAX,EAAK+B,YACL,kBAACf,EAAA,EAAD,CAAQG,QAAM,EAACtF,QA1DM,WAC/ByE,GAAqB,KAyDX,eC1CC0B,G,MA/BG,SAAEzG,GAClB,OAA4B,IAAvBA,EAAM0G,MAAMC,OAEb,yBAAKlG,UAAU,qBACb,kBAACmD,EAAA,EAAD,KACE,sEACA,kBAAC6B,EAAA,EAAD,CAAQc,GAAG,eAAX,iBAON,wBAAI9F,UAAU,cACVT,EAAM0G,MAAMzC,KAAK,SAAE2C,GAAF,OACjB,kBAAC,EAAD,CACE9H,IAAM8H,EAAMxB,GACZA,GAAKwB,EAAMxB,GACXa,MAAQW,EAAMX,MACdE,MAAQS,EAAMT,MACdC,YAAcQ,EAAMR,YACpBZ,QAAUoB,EAAMpB,QAChBc,UAAYM,EAAMC,QAClBnB,YAAckB,EAAME,SACpBvB,SAAWvF,EAAM+G,sB,yyMCgBZC,UAvCI,WACjB,MAA0CnF,qBAA1C,mBAAQoF,EAAR,KAAsBC,EAAtB,KACA,EAAsDtF,cAA9CE,EAAR,EAAQA,UAAW5C,EAAnB,EAAmBA,MAAOiD,EAA1B,EAA0BA,YAAawB,EAAvC,EAAuCA,WAEjC0C,EAASc,cAAYd,OAE3B9C,qBAAW,YACQ,uCAAG,6GAEWpB,EAAY,GAAD,OACjCgD,yCADiC,wBACgBkB,IAHtC,OAEVpD,EAFU,OAKhBiE,EAAiBjE,EAAamE,QALd,uGAAH,qDAQjBC,KACC,CAAElF,EAAakE,IAQlB,OACE,kBAAC,IAAM/E,SAAP,KACE,kBAACvB,EAAA,EAAD,CAAYb,MAAQA,EAAQgB,QAAUyD,IACpC7B,GACA,yBAAKrB,UAAU,UACb,kBAACqF,EAAA,EAAD,QAGDhE,GAAamF,GACd,kBAAC,EAAD,CAAWP,MAAQO,EAAeF,cAfZ,SAAAO,GAC1BJ,GAAiB,SAAAK,GAAU,OACzBA,EAAWrE,QAAQ,SAAA0D,GAAK,OAAIA,EAAMxB,KAAOkC","file":"static/js/6.cda6d47b.chunk.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import React from 'react';\n\nimport Modal from './Modal';\nimport Button from '../FormElements/Button';\n\nconst ErrorModal = props => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","import React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport Backdrop from \"./Backdrop\";\nimport \"./Modal.css\";\n\nconst ModalOverlay = (props) => {\n  const content = (\n    <div className={`modal ${props.className}`} style={props.style}>\n      <header className={`modal__header ${props.headerClass}`}>\n        <h2>{props.header}</h2>\n      </header>\n      <form\n        onSubmit={\n          props.onSubmit ? props.onSubmit : (event) => event.preventDefault()\n        }\n      >\n        <div className={`modal__content ${props.contentClass}`}>\n          {props.children}\n        </div>\n        <footer className={`modal__footer ${props.footerClass}`}>\n          {props.footer}\n        </footer>\n      </form>\n    </div>\n  );\n\n  return createPortal(content, document.getElementById(\"modal-hook\"));\n};\n\nconst Modal = (props) => {\n  return (\n    <React.Fragment>\n      {props.show && <Backdrop onClick={props.onCancel} />}\n      <CSSTransition\n        in={props.show}\n        mountOnEnter\n        unmountOnExit\n        timeout={200}\n        classNames=\"modal\"\n      >\n        <ModalOverlay {...props} />\n      </CSSTransition>\n    </React.Fragment>\n  );\n};\n\nexport default Modal;\n","import { useState, useCallback, useRef, useEffect } from 'react';\n\nexport const useHttpClient = () => {\n    const [ isLoading, setIsLoading ] = useState( false );\n    const [ error, setError ] = useState();\n\n    const activeHttpRequests = useRef( [] );\n\n    const sendRequest = useCallback(\n        async ( url, method = 'GET', body = null, headers = {} ) => {\n            setIsLoading( true );\n            const httpAbortCtrl = new AbortController();\n            activeHttpRequests.current.push( httpAbortCtrl );\n\n            try {\n                const response = await fetch( url, {\n                    method,\n                    body,\n                    headers,\n                    signal: httpAbortCtrl.signal\n                } );\n\n                const responseData = await response.json();\n\n                activeHttpRequests.current = activeHttpRequests.current.filter(\n                    reqCtrl => reqCtrl !== httpAbortCtrl\n                );\n\n                if ( !response.ok ) {\n                    throw new Error( responseData.message );\n                }\n\n                setIsLoading( false );\n                return responseData;\n            } catch ( err ) {\n                setError( err.message );\n                setIsLoading( false );\n                throw err;\n            }\n        },\n        []\n    );\n\n    const clearError = () => {\n        setError( null );\n    };\n\n    useEffect( () => {\n        return () => {\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            activeHttpRequests.current.forEach( abortCtrl => abortCtrl.abort() );\n        };\n    }, [] );\n\n    return { isLoading, error, sendRequest, clearError };\n};\n","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React, { useRef, useEffect } from \"react\";\n\nimport \"./Map.css\";\n\nconst Map = (props) => {\n  const mapRef = useRef();\n\n  const { center, zoom } = props;\n\n  useEffect(() => {\n    const map = new window.google.maps.Map(mapRef.current, {\n      center: center,\n      zoom: zoom,\n    });\n\n    new window.google.maps.Marker({ position: props.center, map: map });\n  }, [center, zoom]);\n\n  return (\n    <div\n      ref={mapRef}\n      className={`map ${props.className}`}\n      style={props.style}\n    ></div>\n  );\n};\n\nexport default Map;\n","import React, { useState, useContext } from \"react\";\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElements/Modal\";\nimport Map from \"../../shared/components/UIElements/Map\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\n\nimport \"./PlaceItem.css\";\n\nconst PlaceItem = ( props ) => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient()\n  const auth = useContext( AuthContext )\n  const [ showMap, setShowMap ] = useState( false );\n  const [ showConfirmModal, setShowConfirmModal ] = useState( false );\n\n  const openMapHandler = () => setShowMap( true );\n  const closeMapHandler = () => setShowMap( false );\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal( true );\n  }\n\n  const cancelDeteleHandler = () => {\n    setShowConfirmModal( false );\n  }\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal( false );\n    try {\n      await sendRequest( `${process.env.REACT_APP_BACKEND_URL}/places/${props.id}`, 'DELETE', null, { Authorization: \"Bearer \" + auth.token } )\n      props.onDelete( props.id );\n    } catch ( err ) { }\n  }\n\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={ error } onClear={ clearError } />\n      <Modal\n        show={ showMap }\n        onCancel={ closeMapHandler }\n        header={ props.address }\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={ <Button onClick={ closeMapHandler }>CLOSE</Button> }\n      >\n        <div className=\"map-container\">\n          <Map center={ props.coordinates } zoom={ 16 } />\n        </div>\n      </Modal>\n      <Modal\n        show={ showConfirmModal }\n        onCancel={ cancelDeteleHandler }\n        header=\"Are you sure?\" footerClass=\"place-item__modal-actions\"\n        footer={ <React.Fragment><Button inverse onClick={ cancelDeteleHandler }>Cancel</Button>\n          <Button danger onClick={ confirmDeleteHandler }>Delete</Button></React.Fragment> }>\n        <p>Are you sure you want to delete this coffee share? This action is irreversible.</p>\n      </Modal >\n      <li className=\"place-item\">\n        <Card classNam=\"place-item__content\">\n          { isLoading && <LoadingSpinner asOverlay /> }\n          <div className=\"place-item__image\">\n            <img src={ `${process.env.REACT_APP_ASSET_URL}${props.image} ` } alt={ props.title } />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{ props.title }</h2>\n            <h3>{ props.address }</h3>\n            <p>{ props.description }</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={ openMapHandler }>\n              View On Map\n            </Button>\n            { auth.userId === props.creatorId &&\n              <Button to={ `/places/${props.id}` }>EDIT</Button> }\n            { auth.isLoggedIn &&\n              <Button danger onClick={ showDeleteWarningHandler }>DELETE</Button>\n            }\n\n          </div>\n        </Card>\n      </li>\n    </React.Fragment >\n  );\n};\n\nexport default PlaceItem;\n","import React from \"react\";\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport PlaceItem from \"./PlaceItem\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport \"./PlaceList.css\";\n\nconst PlaceList = ( props ) => {\n  if ( props.items.length === 0 ) {\n    return (\n      <div className=\"place-list center\">\n        <Card>\n          <h2>No places found. Create a place first!</h2>\n          <Button to=\"/places/new\">Share Place</Button>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <ul className=\"place-list\">\n      { props.items.map( ( place ) => (\n        <PlaceItem\n          key={ place.id }\n          id={ place.id }\n          image={ place.image }\n          title={ place.title }\n          description={ place.description }\n          address={ place.address }\n          creatorId={ place.creator }\n          coordinates={ place.location }\n          onDelete={ props.onDeletePlace }\n        />\n      ) ) }\n    </ul>\n  );\n};\n\nexport default PlaceList;\n","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport PlaceList from '../components/PlaceList';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\n\nconst UserPlaces = () => {\n  const [ loadedPlaces, setLoadedPlaces ] = useState();\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n  const userId = useParams().userId;\n\n  useEffect( () => {\n    const fetchPlaces = async () => {\n      try {\n        const responseData = await sendRequest(\n          `${process.env.REACT_APP_BACKEND_URL}/places/user/${userId}`\n        );\n        setLoadedPlaces( responseData.places );\n      } catch ( err ) { }\n    };\n    fetchPlaces();\n  }, [ sendRequest, userId ] );\n\n  const placeDeletedHandler = deletedPlaceId => {\n    setLoadedPlaces( prevPlaces =>\n      prevPlaces.filter( place => place.id !== deletedPlaceId )\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={ error } onClear={ clearError } />\n      { isLoading && (\n        <div className=\"center\">\n          <LoadingSpinner />\n        </div>\n      ) }\n      { !isLoading && loadedPlaces && (\n        <PlaceList items={ loadedPlaces } onDeletePlace={ placeDeletedHandler } />\n      ) }\n    </React.Fragment>\n  );\n};\n\nexport default UserPlaces;\n"],"sourceRoot":""}